# 战略绩效解码系统 - 项目验收标准 (Acceptance Criteria)

## 1. 概述

本文档定义了战略绩效解码系统（Strategy Decode）的验收标准。验收工作将依据此标准进行，以确保系统满足业务需求、具有良好的用户体验并符合质量要求。

## 2. 功能验收标准

### 2.1 战略解码核心功能

- **战略地图 (Strategy Map)**
  - [ ] **展示准确性**：必须正确显示三个同心圆结构（市场选择、客户结构、价值竞争）。
  - [ ] **文本渲染**：所有扇形区域的文字必须清晰可见，并根据扇形角度正确旋转。
  - [ ] **交互性**：点击部门名称应展开/收起其下属模块（"业务流程", "复盘管理", "团队效能"）。同级部门应互斥展开。
  - [ ] **层级支持**：支持多级部门结构的展示和交互。

- **表格编辑与管理**
  - [ ] **实时保存**：所有表格（财务、市场、客户等）的编辑操作应触发自动保存。
  - [ ] **保存状态反馈**：编辑时应显示“保存中...”，保存成功显示“已自动保存”。
  - [ ] **防抖机制**：快速输入不应频繁触发请求，应有合理的防抖延迟（建议 500ms-1500ms）。
  - [ ] **错误处理**：保存失败时应友好的提示用户，且不应因为一次失败中断后续操作。
  - [ ] **行列操作**：支持动态添加、删除行和列。
  - [ ] **列宽调整**：支持拖拽调整列宽，并持久化保存宽度设置。
  - [ ] **多Tab支持**：客户结构等模块应支持 Tab 切换，且各 Tab 数据独立且能正常保存。

- **组织管理**
  - [ ] **部门树**：应能正确展示企业的部门层级结构。
  - [ ] **人员关联**：部门与人员的关联关系正确，能添加/移除部门成员。

### 2.2 账户与权限

- **登录/注册**
  - [ ] **多方式登录**：支持邮箱密码、手机号验证码登录。
  - [ ] **表单验证**：对输入格式进行严格验证（邮箱格式、手机号格式等）。
  - [ ] **Token管理**：Token 过期应自动跳转登录页，并清除本地缓存。

- **权限控制**
  - [ ] **路由保护**：未登录用户无法访问 `/admin` 或 `/enterprise` 下的受以此路由。
  - [ ] **数据隔离**：不同企业的数据必须严格隔离，无法跨企业访问。

### 2.3 AI 辅助功能

- **配置管理**
  - [ ] **API 设置**：支持配置 Base URL 和 API Key。
  - [ ] **模型选择**：支持选择不同的 AI 模型，并能保存默认设置。

## 3. UI/UX 验收标准

### 3.1 视觉设计

- **一致性**：全站颜色、字体、间距应遵循统一的设计规范（使用 Design Token 或 SCSS 变量）。
- **美观性**：界面应整洁、现代，避免由于内容过多导致的布局错乱。
- **响应式**：在主流分辨率下（1366x768 及以上）布局不应崩坏。

### 3.2 交互体验

- **流畅性**：页面切换应无明显卡顿。
- **加载状态**：数据加载过程中必须展示 Loading 状态（Spin 或 Skeleton）。
- **操作反馈**：所有重要操作（保存、删除、提交）都应有明确的反馈（Message 或 Modal）。

## 4. 技术与性能验收标准

### 4.1 性能

- **加载速度**：首屏加载时间（FCP）应在 2秒内。
- **操作响应**：交互操作延迟（TBT）应低于 300ms。
- **无无效请求**：避免重复发送相同的 API 请求（已修复的竞态条件问题）。

### 4.2 代码质量

- **类型安全**：TypeScript 类型定义应完整，避免过多的 `any` 类型。
- **无报错**：控制台（Console）在正常操作流程中不应出现红色 Error。
- **代码规范**：代码应符合项目配置的 ESLint 和 Prettier 规范。

### 4.3 兼容性

- **浏览器**：支持 Chrome (最新版), Edge (最新版), Safari (最新版)。

## 5. 已知问题与优化建议 (Self-Review Findings)

基于上述标准，对当前项目进行的自查评审：

### 5.1 已修复问题

- [x] **保存失败/并发冲突**：已通过引入 `AbortController` 修复了 `useStrategyTableData` 和 `GenericTable` 中的竞态条件问题。

### 5.2 待优化项 (优化计划)

1. **加载状态细化**：`CustomerStructureTabs` 在加载时整个卡片显示 "加载中..." 文本。
    - *建议*：使用 Ant Design 的 `<Spin />` 或 `<Skeleton />` 组件提供更好的视觉体验。
2. **Performance Monitoring**: Add telemetry for save latency.
3. **Advanced Undo/Redo**: Implement undo/redo stack for table edits.

## 6. 结论

当前系统核心功能可用，通过修复保存机制的竞态条件，数据稳定性得到了显著提升。建议在下一阶段重点进行**UX 细节打磨（统一加载状态）**、**性能监控**和**高级撤销/重做功能**。
